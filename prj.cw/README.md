# Приложение для сегментации теней

Консольное приложение на C++ для автоматического обнаружения и сегментации теней на изображениях с использованием OpenCV.

## Требования

- Windows 10/11
- Visual Studio 2019/2022 с поддержкой C++
- CMake 3.10 или выше
- OpenCV 4.x (установленный в C:\opencv)

## Сборка

1. Убедитесь, что OpenCV установлен в C:\opencv
2. Запустите build.bat
3. Исполняемый файл будет создан в build/Release/

## Использование

```bash
cd build/Release
ShadowSegmentation.exe путь_к_изображению.jpg
```

### Управление

- **ESC** или **Q** - выход из программы
- **S** - сохранить результат (shadow_result.jpg и shadow_mask.jpg)
- **R** - сбросить параметры к значениям по умолчанию

## Структура проекта

```
prj.cw/
├── CMakeLists.txt          # Конфигурация сборки
├── build.bat               # Скрипт сборки для Windows
├── README.md               # Документация
├── src/                    # Исходный код
│   ├── main.cpp            # Главный файл
│   └── shadowledentifier.cpp  # Алгоритм сегментации
├── include/                # Заголовочные файлы
│   └── shadowledentifier.h
├── build/                  # Директория сборки
└── examples/               # Примеры изображений
```

## Алгоритм

Приложение использует следующий алгоритм для обнаружения теней:

1. Преобразование изображения в цветовое пространство HSV
2. Применение пороговой фильтрации по каналам HSV
3. Морфологические операции для удаления шума
4. Наложение цветной маски на исходное изображение

Параметры HSV по умолчанию оптимизированы для большинства случаев освещения.

## Примеры использования

```bash
# Обработка фотографии
ShadowSegmentation.exe photo.jpg

# Обработка изображения с тенями на асфальте
ShadowSegmentation.exe street_scene.png
```

## Устранение неполадок

- **Ошибка OpenCV**: Убедитесь, что OpenCV установлен в C:\opencv
- **Ошибка сборки**: Проверьте, что Visual Studio 2019/2022 установлена
- **Файл не найден**: Проверьте путь к изображению
